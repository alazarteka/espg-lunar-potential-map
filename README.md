# Lunar Prospector Plasma Analysis

## Description

This project analyzes data from the Lunar Prospector mission to model plasma flux and map lunar surface potential. It utilizes data from the NASA Planetary Data System and SPICE kernels for trajectory and orientation information.

Currently in active development—major revisions ongoing.

## Dependencies

This project uses modern Python scientific computing libraries:

- **Core Scientific:** `numpy`, `pandas`, `scipy`, `matplotlib`
- **Space Science:** `spiceypy` (NASA SPICE toolkit)
- **Data Processing:** `requests`, `beautifulsoup4`, `tqdm`
- **Interactive Analysis:** `jupyter`, `plotly`, `ipython`
- **Development:** `pytest`, `black`, `ruff`, `mypy`

All dependencies are managed through UV and specified in `pyproject.toml`.

## Project Structure

```
.
├── README.md               # This file
├── pyproject.toml          # UV project configuration and dependencies
├── uv.lock                 # Dependency lock file
├── .gitignore              # Git ignore file
├── data/                   # Processed data (created/populated by src/data_acquisition.py)
│   └── spice_kernels/      # SPICE kernel files
│       └── kernels.lock    # SHA-1 for SPICE kernels
└── src/                    # Source code
    ├── config.py           # Configuration file
    ├── data_acquisition.py # Handles data and SPICE kernel acquisition
    ├── flux.py             # Flux and potential calculation logic
    ├── kappa_fitter.py     # Kappa distribution fitting
    ├── model.py            # Core modeling components
    ├── potential_mapper.py # Potential mapping logic
    └── utils/              # Utility functions module
        ├── __init__.py
        ├── attitude.py
        ├── coordinates.py
        ├── file_ops.py
        ├── geometry.py
        └── spice_ops.py
```

## Installation

### Prerequisites
- Python 3.12 or later
- [UV package manager](https://docs.astral.sh/uv/)

### Setup

1.  **Install UV** (if not already installed):
    ```bash
    curl -LsSf https://astral.sh/uv/install.sh | sh
    ```

2.  **Set up the project environment:**
    ```bash
    # Clone the repository (if not already done)
    git clone <repository-url>
    cd espg-lunar-potential-map
    
    # Install dependencies and create virtual environment
    uv sync
    ```

3.  **Download necessary data:**
    ```bash
    uv run python -m src.data_acquisition
    ```


## Data

*   Data required by the core modules are expected in `data/`.
*   SPICE kernels are expected in `data/spice_kernels/`.
*   Running `src/data_acquisition.py` will download the files in the appropriate directory if they are not locally available.
*   SHA-1 for SPICE kernels used in `data/spice_kernels/kernels.lock`, generated by running ```shasum -a 1 data/spice_kernels/*.* > data/spice_kernels/kernels.lock``` in the home directory.

## Usage

After setting up and downloading data, run the desired module using UV. For example:

```bash
# Run the potential mapper
uv run python -m src.potential_mapper

# Start Jupyter Lab for interactive analysis
uv run jupyter lab

# Start Jupyter Notebook
uv run jupyter notebook

# Run tests (if available)
uv run pytest
```

### Development

```bash
# Add new dependencies
uv add package-name

# Add development dependencies
uv add --dev pytest black ruff

# Update dependencies
uv sync --upgrade

# Run with specific Python version
uv run --python 3.12 python script.py
```